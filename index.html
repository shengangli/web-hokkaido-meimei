<!DOCTYPE html>
<!--
    ============================================================================
    ğŸ¯ PRODUCT MANAGEMENT GUIDE - READ THIS BEFORE EDITING!
    ============================================================================
    
    TO ADD A NEW PRODUCT:
    
    1. ğŸ“¦ CREATE PRODUCT IN STRIPE DASHBOARD
       - Get the product ID (e.g., prod_ABC123)
    
    2. ğŸ”§ ADD TO server.js - PRODUCTS object (line ~15):
       'your-product-id': {
           stripe_id: 'prod_ABC123',
           name: 'ğŸ¯ Your Product Name',
           description: 'Product description',
           pricing_type: 'tiered',  // or 'simple'
           tiers: [
               { up_to: 4, unit_amount: 50000 },    // NT$500 for 1-4 items
               { up_to: 'inf', unit_amount: 40000 } // NT$400 for 5+ items
           ],
           quantity_options: [1, 2, 3, 4, 5, 10]
       }
    
    3. ğŸ¨ ADD HTML SECTION (copy existing product section and modify):
       - Update product ID in all onclick functions
       - Update colors, names, descriptions
       - Update element IDs to match your product
    
    4. âœ… THAT'S IT! The universal functions handle everything else automatically.
    
    NO NEED TO MODIFY:
    - JavaScript functions (they're universal now)
    - API endpoints (they work for all products)
    - Checkout logic (universal)
    
    ============================================================================
-->
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ—¥æœ¬æ—…è¡Œä¼åŠƒå®¶ã®ç§è—æ¸…å–® | æ·±åº¦æ—…è¡Œä¼åŠƒå®¶</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'hokkaido-red': '#E53E3E',
                        'hokkaido-light-red': '#FED7D7',
                        'hokkaido-pink': '#FBB6CE',
                        'hokkaido-cream': '#FFFAF0',
                        'hokkaido-snow': '#F7FAFC',
                        'hokkaido-text': '#2D3748',
                        'hokkaido-light': '#718096'
                    },
                    fontFamily: {
                        'chinese': ['Noto Sans TC', 'PingFang TC', 'Microsoft JhengHei', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;600;700&display=swap');
        body { 
            font-family: 'Noto Sans TC', 'PingFang TC', 'Microsoft JhengHei', sans-serif;
        }
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(229, 62, 62, 0.15);
        }
        .hokkaido-gradient {
            background: linear-gradient(135deg, #E53E3E 0%, #FC8181 50%, #FBB6CE 100%);
        }
        .snow-pattern {
            background-image: radial-gradient(circle at 2px 2px, rgba(255,255,255,0.3) 1px, transparent 0);
            background-size: 20px 20px;
        }
        .mobile-nav {
            display: none;
        }
        @media (max-width: 768px) {
            .desktop-nav { display: none; }
            .mobile-nav { display: block; }
        }
        .product-item {
            background: linear-gradient(45deg, #F7FAFC, #FFFAF0);
            border-left: 4px solid #E53E3E;
        }
        .price-highlight {
            background: linear-gradient(135deg, #E53E3E, #FC8181);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .stripe-button {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            transition: all 0.3s ease;
        }
        .stripe-button:hover {
            background: linear-gradient(135deg, #4f46e5, #7c3aed);
            transform: translateY(-1px);
            box-shadow: 0 8px 25px rgba(99, 102, 241, 0.3);
        }
    </style>
</head>
<body class="bg-hokkaido-cream min-h-screen">
    <!-- Mobile Header Navigation -->
    <nav class="hokkaido-gradient text-black snow-pattern">
        <div class="mx-auto px-3">
            <!-- Mobile Navigation -->
            <div class="mobile-nav py-2">
                <div class="text-center mb-2">
                    <div class="text-sm font-bold">ğŸ æ—¥æœ¬æ—…è¡Œä¼åŠƒå®¶</div>
                </div>
                <div class="grid grid-cols-4 gap-1 text-xs text-center">
                    <a href="#tours" class="bg-white/20 py-2 rounded text-black hover:bg-white/30 transition-colors">æ—…è¡Œè¨­è¨ˆ</a>
                    <a href="#products" class="bg-white/20 py-2 rounded text-black hover:bg-white/30 transition-colors">ç²¾é¸å•†å“</a>
                    <a href="#inquiry" class="bg-white/20 py-2 rounded text-black hover:bg-white/30 transition-colors">å®¢è£½è¦åŠƒ</a>
                    <a href="#resources" class="bg-white/20 py-2 rounded text-black hover:bg-white/30 transition-colors">æ—…è¡Œè³‡æº</a>
                </div>
            </div>
        </div>
    </nav>

    <div class="mx-auto px-3 py-4 max-w-md sm:max-w-2xl lg:max-w-4xl">

        <!-- Available Tours Section -->
        <div id="tours" class="mb-5">
            <h2 class="text-base font-bold text-hokkaido-text mb-1 text-center">ğŸ—¾ æ—¥æœ¬æ—…è¡Œè¨­è¨ˆ</h2>
            <p class="text-center text-hokkaido-light mb-3 text-xs">å°ˆç‚ºä½ è¨­è¨ˆçš„æ·±åº¦è¡Œç¨‹</p>
            
            <div class="space-y-3">
                <!-- åŒ—é™¸åœ˜ç‰¹åˆ¥ä¼åŠƒ -->
                <div class="bg-white border border-hokkaido-light-red rounded-lg p-3 card-hover">
                    <div class="flex justify-between items-start mb-2">
                        <div class="flex-1">
                            <h3 class="text-sm font-bold text-hokkaido-text mb-1">â™¨ï¸ åŒ—é™¸åœ˜ç§˜å¢ƒå·¡ç¦®</h3>
                            <p class="text-hokkaido-light mb-1 text-xs">æ±äº¬â†’ä¸‹å‘‚æ¸©æ³‰</p>
                            <div class="flex flex-wrap gap-1 text-xs">
                                <span class="bg-hokkaido-light-red px-2 py-0.5 rounded-full">ğŸ“… 3/25-4/5</span>
                                <span class="bg-hokkaido-pink px-2 py-0.5 rounded-full">ğŸ‘¥ åƒ…å‰©3å¸­</span>
                            </div>
                        </div>
                        <div class="text-right ml-2">
                            <p class="text-base font-bold text-hokkaido-red">NT$9,200</p>
                        </div>
                    </div>
                    <button onclick="openBookingForm('cherry-blossom')" 
                            class="w-full bg-hokkaido-red text-white py-3 px-3 rounded-md hover:bg-opacity-90 transition-colors font-medium text-sm">
                        ç«‹å³é ç´„ ğŸŒ¸
                    </button>
                </div>

                <!-- åŒ—æµ·é“å†¬å­£é™å®š -->
                <div class="bg-white border border-hokkaido-light-red rounded-lg p-3 card-hover">
                    <div class="flex justify-between items-start mb-2">
                        <div class="flex-1">
                            <h3 class="text-sm font-bold text-hokkaido-text mb-1">â„ï¸ åŒ—æµ·é“æµæ°·</h3>
                            <p class="text-hokkaido-light mb-1 text-xs">æœ­å¹Œâ†’æ—­å·â†’çŸ¥åºŠ</p>
                            <div class="flex flex-wrap gap-1 text-xs">
                                <span class="bg-hokkaido-light-red px-2 py-0.5 rounded-full">ğŸ“… 2/10-2/20</span>
                                <span class="bg-hokkaido-pink px-2 py-0.5 rounded-full">ğŸ‘¥ é‚„æœ‰7å¸­</span>
                            </div>
                        </div>
                        <div class="text-right ml-2">
                            <p class="text-base font-bold text-hokkaido-red">NT$1,000</p>
                        </div>
                    </div>
                    <button onclick="openBookingForm('hokkaido-winter')" 
                            class="w-full bg-hokkaido-red text-white py-3 px-3 rounded-md hover:bg-opacity-90 transition-colors font-medium text-sm">
                        æ¶å…ˆé è¨‚ â„ï¸
                    </button>
                </div>
            </div>
        </div>

        <!-- Products Section - Redesigned -->
        <div id="products" class="mb-5">
            <h2 class="text-base font-bold text-hokkaido-text mb-1 text-center">ğŸ›ï¸ ç²¾é¸å•†å“</h2>
            <p class="text-center text-hokkaido-light mb-3 text-xs">è¦ªè‡ªæŒ‘é¸çš„è³ªæ„Ÿå¥½ç‰©</p>
            
            <!-- ğŸ¦‘ é­·é­šé…’å£ºå¥—çµ„ - Premium Featured Product -->
            <div class="bg-white border-2 border-hokkaido-red rounded-xl p-4 card-hover mb-4 relative overflow-hidden">
                <!-- Decorative background -->
                <div class="absolute top-0 right-0 w-20 h-20 bg-hokkaido-light-red rounded-full -translate-y-10 translate-x-10 opacity-20"></div>
                
                <div class="relative">
                    <div class="flex items-center justify-center mb-3">
                        <div class="hokkaido-gradient text-white px-3 py-1 rounded-full text-xs font-bold shadow-md">
                            ğŸ”¥ é™æ™‚åœ˜è³¼ - è²·è¶Šå¤šçœè¶Šå¤š
                        </div>
                    </div>
                    
                    <div class="text-center mb-4">
                        <h3 class="text-xl font-bold text-hokkaido-text mb-2">ğŸ¦‘ é­·é­šé…’å£ºå¥—çµ„</h3>
                        <p class="text-hokkaido-light text-sm mb-3">å‡½é¤¨æ¼å¸«å‚³çµ±å·¥è— + ç²¾ç¾å°é…’æ¯<br/>ç¨å®¶é™é‡ãƒ»ç„¡æ³•è¤‡è£½çš„æ”¶è—åƒ¹å€¼</p>
                        
                        <!-- Price Display -->
                        <div class="bg-hokkaido-light-red p-3 rounded-lg mb-3">
                            <div class="text-center">
                                <p id="tiered-pricing-display" class="text-2xl font-bold text-hokkaido-red">NT$750â†’NT$550</p>
                                <p class="text-xs text-hokkaido-text">å‹•æ…‹å„ªæƒ è¨ˆåƒ¹ â€¢ è²·è¶Šå¤šçœè¶Šå¤š</p>
                            </div>
                        </div>
                        
                        <!-- Value Props -->
                        <div class="grid grid-cols-3 gap-2 text-xs mb-4">
                            <div class="text-center">
                                <div class="text-hokkaido-red font-bold">âœ“</div>
                                <div class="text-hokkaido-light">å‚³çµ±å·¥è—</div>
                            </div>
                            <div class="text-center">
                                <div class="text-hokkaido-red font-bold">âœ“</div>
                                <div class="text-hokkaido-light">é™é‡æ”¶è—</div>
                            </div>
                            <div class="text-center">
                                <div class="text-hokkaido-red font-bold">âœ“</div>
                                <div class="text-hokkaido-light">é€ç¦®é¦–é¸</div>
                            </div>
                        </div>
                    </div>

                    <div class="text-center">
                        <button onclick="showQuantityOptions('squid-sake-set')" 
                                class="hokkaido-gradient hover:shadow-lg text-white py-4 px-6 rounded-lg font-bold text-base flex items-center justify-center space-x-3 transition-all duration-200 mx-auto shadow-md">
                            <span>ğŸ›’</span>
                            <span>é¸æ“‡æ•¸é‡ä¸¦è³¼è²·</span>
                        </button>
                    </div>
                        
                    <!-- Quantity Options (initially hidden) -->
                    <div id="quantity-options" class="mt-3 p-3 bg-hokkaido-light-red rounded-lg border border-hokkaido-red hidden">
                        <div class="text-sm font-medium text-hokkaido-text mb-3 text-center">ğŸ¯ é¸æ“‡è³¼è²·æ•¸é‡</div>
                        
                        <!-- Quick Select Buttons -->
                        <div class="mb-4">
                            <div class="text-xs text-hokkaido-text mb-2">ç†±é–€é¸æ“‡ï¼š</div>
                            <div id="pricing-buttons" class="grid grid-cols-2 gap-2">
                                <!-- Buttons will be populated dynamically from server -->
                                <div class="col-span-2 text-center text-xs text-gray-500 py-2">è¼‰å…¥å¤±æ•—ï¼Œè«‹é‡è©¦</div>
                            </div>
                        </div>
                        
                        <!-- Custom quantity input -->  
                        <div class="p-3 bg-white rounded-lg border border-hokkaido-red">
                            <div class="text-xs font-medium text-hokkaido-text mb-2 text-center">ğŸ’¡ è‡ªå®šç¾©æ•¸é‡</div>
                            <div class="flex items-center space-x-2">
                                <div class="flex-1 relative">
                                    <input type="number" 
                                           id="custom-quantity" 
                                           min="1" 
                                           max="999" 
                                           value="1"
                                           oninput="updateCustomPrice('squid-sake-set')"
                                           onchange="updateCustomPrice('squid-sake-set')"
                                           class="w-full px-3 py-2 border border-gray-300 rounded-lg text-center font-medium focus:ring-2 focus:ring-hokkaido-red focus:border-transparent">
                                    <span class="absolute right-3 top-2 text-xs text-gray-400">å€‹</span>
                                </div>
                                <button onclick="buyCustomQuantity('squid-sake-set')" 
                                        class="px-4 py-2 hokkaido-gradient hover:shadow-md text-white rounded-lg text-sm font-medium transition-all duration-200">
                                    è³¼è²·
                                </button>
                            </div>
                            <div class="text-center mt-2">
                                <span id="custom-price-display" class="text-sm font-bold text-hokkaido-red bg-hokkaido-light-red px-2 py-1 rounded">NT$750</span>
                            </div>
                        </div>
                        
                        <button onclick="hideQuantityOptions('squid-sake-set')" 
                                class="w-full bg-gray-200 hover:bg-gray-300 text-gray-600 py-2 px-3 rounded-lg text-sm font-medium mt-3 transition-colors duration-200">
                            âœ• å–æ¶ˆé¸æ“‡
                        </button>
                    </div>
                </div>
            </div>

            <!-- ğŸŒ æ—¥æœ¬ç‰¹è‰²å•†å“ - Secondary Product -->
            <div class="bg-white border border-hokkaido-pink rounded-xl p-4 card-hover mb-4 relative overflow-hidden">
                <!-- Decorative background -->
                <div class="absolute top-0 right-0 w-16 h-16 bg-hokkaido-pink rounded-full -translate-y-8 translate-x-8 opacity-30"></div>
                
                <div class="relative">
                    <div class="flex items-center justify-center mb-3">
                        <div class="bg-hokkaido-pink text-hokkaido-text px-3 py-1 rounded-full text-xs font-bold">
                            ğŸ”¥ é‡è³¼å„ªæƒ 
                        </div>
                    </div>
                    
                    <div class="text-center mb-4">
                        <h3 class="text-lg font-bold text-hokkaido-text mb-2">ğŸ¶ åŒ—æµ·é“å¤©ç„¶æ˜†å¸ƒé…’æ¯</h3>
                        <p class="text-hokkaido-light text-sm mb-3">ç²¾é¸æ—¥æœ¬å•†å“ï¼Œå“è³ªä¿è­‰<br/>åŒ—æµ·é“ç›´é€ãƒ»é™æ™‚å„ªæƒ åƒ¹</p>
                        
                        <!-- Price Display -->
                        <div class="bg-hokkaido-pink p-3 rounded-lg mb-3">
                            <div class="text-center">
                                <p id="new-product-pricing-display" class="text-xl font-bold text-hokkaido-red">NT$400â†’NT$350</p>
                                <p class="text-xs text-hokkaido-text">å‹•æ…‹å„ªæƒ è¨ˆåƒ¹ â€¢ è²·è¶Šå¤šçœè¶Šå¤š</p>
                            </div>
                        </div>
                    </div>

                    <div class="text-center">
                        <button onclick="showQuantityOptions('new-product')" 
                                class="bg-hokkaido-red hover:bg-opacity-90 hover:shadow-lg text-white py-3 px-6 rounded-lg font-bold text-base flex items-center justify-center space-x-3 transition-all duration-200 mx-auto">
                            <span>ğŸ›’</span>
                            <span>é¸æ“‡æ•¸é‡ä¸¦è³¼è²·</span>
                        </button>
                    </div>
                        
                    <!-- Quantity Options (initially hidden) -->
                    <div id="new-product-quantity-options" class="mt-3 p-3 bg-hokkaido-pink rounded-lg border border-hokkaido-red hidden">
                        <div class="text-sm font-medium text-hokkaido-text mb-3 text-center">ğŸ¯ é¸æ“‡è³¼è²·æ•¸é‡</div>
                        
                        <!-- Quick Select Buttons -->
                        <div class="mb-4">
                            <div class="text-xs text-hokkaido-text mb-2">ç†±é–€é¸æ“‡ï¼š</div>
                            <div id="new-product-pricing-buttons" class="grid grid-cols-2 gap-2">
                                <!-- Buttons will be populated dynamically from server -->
                                <div class="col-span-2 text-center text-xs text-gray-500 py-2">è¼‰å…¥å¤±æ•—ï¼Œè«‹é‡è©¦</div>
                            </div>
                        </div>
                        
                        <!-- Custom quantity input -->  
                        <div class="p-3 bg-white rounded-lg border border-hokkaido-red">
                            <div class="text-xs font-medium text-hokkaido-text mb-2 text-center">ğŸ’¡ è‡ªå®šç¾©æ•¸é‡</div>
                            <div class="flex items-center space-x-2">
                                <div class="flex-1 relative">
                                    <input type="number" 
                                           id="new-product-custom-quantity" 
                                           min="1" 
                                           max="999" 
                                           value="1"
                                           oninput="updateCustomPrice('new-product')"
                                           onchange="updateCustomPrice('new-product')"
                                           class="w-full px-3 py-2 border border-gray-300 rounded-lg text-center font-medium focus:ring-2 focus:ring-hokkaido-red focus:border-transparent">
                                    <span class="absolute right-3 top-2 text-xs text-gray-400">å€‹</span>
                                </div>
                                <button onclick="buyCustomQuantity('new-product')" 
                                        class="px-4 py-2 bg-hokkaido-red hover:bg-opacity-90 hover:shadow-md text-white rounded-lg text-sm font-medium transition-all duration-200">
                                    è³¼è²·
                                </button>
                            </div>
                            <div class="text-center mt-2">
                                <span id="new-product-custom-price-display" class="text-sm font-bold text-hokkaido-red bg-hokkaido-light-red px-2 py-1 rounded">NT$400</span>
                            </div>
                        </div>
                        
                        <button onclick="hideQuantityOptions('new-product')" 
                                class="w-full bg-gray-200 hover:bg-gray-300 text-gray-600 py-2 px-3 rounded-lg text-sm font-medium mt-3 transition-colors duration-200">
                            âœ• å–æ¶ˆé¸æ“‡
                        </button>
                    </div>
                </div>
            </div>


        <!-- Travel Inquiry Section -->
        <div id="inquiry" class="mb-5">
            <h2 class="text-base font-bold text-hokkaido-text mb-1 text-center">ğŸ’¬ å®¢è£½åŒ–æ—…éŠè¦åŠƒ</h2>
            <p class="text-center text-hokkaido-light mb-3 text-xs">å‘Šè¨´æˆ‘ä½ çš„éœ€æ±‚ï¼Œæ‰“é€ å°ˆå±¬æ—¥æœ¬ä¹‹æ—…</p>
            
            <div class="bg-white border border-hokkaido-light-red rounded-lg p-3">
                <div class="space-y-3 sm:grid sm:grid-cols-2 sm:gap-3 sm:space-y-0">
                    <div>
                        <h3 class="text-sm font-bold text-hokkaido-text mb-2">ğŸ¯ æœå‹™å…§å®¹</h3>
                        <ul class="space-y-1 text-hokkaido-light text-xs">
                            <li class="flex items-start space-x-1">
                                <span class="text-hokkaido-red text-xs">âœ“</span>
                                <span>é‡èº«æ‰“é€ è¡Œç¨‹è¦åŠƒ</span>
                            </li>
                            <li class="flex items-start space-x-1">
                                <span class="text-hokkaido-red text-xs">âœ“</span>
                                <span>åœ¨åœ°ç¾é£Ÿæ¨è–¦</span>
                            </li>
                            <li class="flex items-start space-x-1">
                                <span class="text-hokkaido-red text-xs">âœ“</span>
                                <span>ä½å®¿è¨‚æˆ¿å”åŠ©</span>
                            </li>
                            <li class="flex items-start space-x-1">
                                <span class="text-hokkaido-red text-xs">âœ“</span>
                                <span>äº¤é€šç¥¨åˆ¸ä»£è³¼</span>
                            </li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="text-sm font-bold text-hokkaido-text mb-2">ğŸ’ æ–¹æ¡ˆ</h3>
                        <div class="space-y-2">
                            <div class="p-2 bg-hokkaido-snow rounded text-xs">
                                <div class="flex justify-between items-center">
                                    <span class="font-medium">åŸºç¤è«®è©¢</span>
                                    <span class="text-hokkaido-red font-bold">å…è²»</span>
                                </div>
                            </div>
                            <div class="p-2 bg-hokkaido-snow rounded text-xs">
                                <div class="flex justify-between items-center">
                                    <span class="font-medium">è©³ç´°è¦åŠƒ</span>
                                    <span class="text-hokkaido-red font-bold">NT$5,000</span>
                                </div>
                            </div>
                            <div class="p-2 bg-hokkaido-snow rounded text-xs">
                                <div class="flex justify-between items-center">
                                    <span class="font-medium">å…¨ç¨‹é™ªåŒ</span>
                                    <span class="text-hokkaido-red font-bold">é¢è­°</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mt-3 text-center">
                    <button onclick="openInquiryForm()" 
                            class="bg-hokkaido-red text-white py-3 px-4 rounded-md hover:bg-opacity-90 transition-colors font-bold text-sm w-full">
                        é–‹å§‹è¦åŠƒæˆ‘çš„æ—…ç¨‹ âœˆï¸
                    </button>
                </div>
            </div>
        </div>

        <!-- Travel Resources Section -->
        <div id="resources" class="mb-5">
            <h2 class="text-base font-bold text-hokkaido-text mb-1 text-center">ğŸ“š æ—…è¡Œè³‡æº</h2>
            <p class="text-center text-hokkaido-light mb-3 text-xs">å¤šå¹´ç´¯ç©çš„å¯¦ç”¨è³‡è¨Šï¼Œå…¨éƒ¨åˆ†äº«çµ¦ä½ </p>
            
            <div class="space-y-2 sm:grid sm:grid-cols-2 sm:gap-2 sm:space-y-0">
                <a href="#" class="card-hover block p-3 bg-white rounded-lg border border-hokkaido-light-red">
                    <div class="flex items-center space-x-3">
                        <div class="w-10 h-10 bg-hokkaido-light-red rounded-lg flex items-center justify-center flex-shrink-0">
                            <span class="text-hokkaido-red">ğŸ¨</span>
                        </div>
                        <div>
                            <h3 class="font-semibold text-hokkaido-text text-sm">æ¨è–¦ä½å®¿æ¸…å–®</h3>
                            <p class="text-xs text-hokkaido-light">ç²¾é¸æ—¥æœ¬å„ªè³ªæ—…é¤¨</p>
                        </div>
                    </div>
                </a>

                <a href="#" class="card-hover block p-3 bg-white rounded-lg border border-hokkaido-light-red">
                    <div class="flex items-center space-x-3">
                        <div class="w-10 h-10 bg-hokkaido-light-red rounded-lg flex items-center justify-center flex-shrink-0">
                            <span class="text-hokkaido-red">ğŸ›ï¸</span>
                        </div>
                        <div>
                            <h3 class="font-semibold text-hokkaido-text text-sm">è³¼ç‰©æŒ‡å—</h3>
                            <p class="text-xs text-hokkaido-light">è¡€æ‹šå¿…è²·æ¸…å–®</p>
                        </div>
                    </div>
                </a>

                <a href="#" class="card-hover block p-3 bg-white rounded-lg border border-hokkaido-light-red">
                    <div class="flex items-center space-x-3">
                        <div class="w-10 h-10 bg-hokkaido-light-red rounded-lg flex items-center justify-center flex-shrink-0">
                            <span class="text-hokkaido-red">ğŸ’³</span>
                        </div>
                        <div>
                            <h3 class="font-semibold text-hokkaido-text text-sm">æ—…éŠä¿¡ç”¨å¡</h3>
                            <p class="text-xs text-hokkaido-light">æœ€åˆ’ç®—å›é¥‹å¡</p>
                        </div>
                    </div>
                </a>

                <a href="#" class="card-hover block p-3 bg-white rounded-lg border border-hokkaido-light-red">
                    <div class="flex items-center space-x-3">
                        <div class="w-10 h-10 bg-hokkaido-light-red rounded-lg flex items-center justify-center flex-shrink-0">
                            <span class="text-hokkaido-red">âœˆï¸</span>
                        </div>
                        <div>
                            <h3 class="font-semibold text-hokkaido-text text-sm">äº¤é€šæ”»ç•¥</h3>
                            <p class="text-xs text-hokkaido-light">æ¶ä¾¿å®œç§˜å¯†æ­¦å™¨</p>
                        </div>
                    </div>
                </a>

                <a href="#" class="card-hover block p-3 bg-white rounded-lg border border-hokkaido-light-red">
                    <div class="flex items-center space-x-3">
                        <div class="w-10 h-10 bg-hokkaido-light-red rounded-lg flex items-center justify-center flex-shrink-0">
                            <span class="text-hokkaido-red">ğŸ“±</span>
                        </div>
                        <div>
                            <h3 class="font-semibold text-hokkaido-text text-sm">å¯¦ç”¨APP</h3>
                            <p class="text-xs text-hokkaido-light">æ—…è¡Œå¿…å‚™è»Ÿé«”</p>
                        </div>
                    </div>
                </a>

                <a href="#" class="card-hover block p-3 bg-white rounded-lg border border-hokkaido-light-red">
                    <div class="flex items-center space-x-3">
                        <div class="w-10 h-10 bg-hokkaido-light-red rounded-lg flex items-center justify-center flex-shrink-0">
                            <span class="text-hokkaido-red">ğŸ“§</span>
                        </div>
                        <div>
                            <h3 class="font-semibold text-hokkaido-text text-sm">æ¯é€±é›»å­å ±</h3>
                            <p class="text-xs text-hokkaido-light">æœ€æ–°è³‡è¨Šç›´é€</p>
                        </div>
                    </div>
                </a>
            </div>
        </div>

        <!-- Footer -->
        <div class="text-center text-hokkaido-light">
            <div class="border-t border-hokkaido-light-red pt-3">
                <p class="font-medium text-hokkaido-text mb-1 text-sm">èˆ‡æˆ‘è¯ç¹«</p>
                <p class="text-xs mb-2">ğŸ“§ hokkaido.meimei@email.com</p>
                <p class="text-xs mb-2">ğŸ“± LINE: @hokkaido_meimei</p>
                <p class="text-xs">Â© 2025 æ—¥æœ¬æ—…è¡Œä¼åŠƒå®¶ã®ç§è—æ¸…å–® â¤ï¸</p>
            </div>
        </div>
    </div>

    <!-- Stripe.js -->
    <script src="https://js.stripe.com/v3/"></script>
    
    <script>
        // Initialize Stripe - Key loaded from server environment
        let stripe;
        
        // Load Stripe key from server
        async function initializeStripe() {
            try {
                const response = await fetch('/api/stripe-key');
                const { publishableKey } = await response.json();
                stripe = Stripe(publishableKey);
                console.log('âœ… Stripe initialized successfully');
            } catch (error) {
                console.error('âŒ Failed to initialize Stripe:', error);
                alert('ä»˜æ¬¾ç³»çµ±åˆå§‹åŒ–å¤±æ•—ï¼Œè«‹é‡æ–°æ•´ç†é é¢æˆ–è¯ç¹«å®¢æœ');
            }
        }

        // Tiered pricing configuration (managed server-side)
        console.log('ğŸ¦‘ é­·é­šé…’å£ºå¥—çµ„ - é‡è³¼å„ªæƒ ç³»çµ±å·²å•Ÿå‹•');



                // ============================================================================
        // ğŸ›’ UNIVERSAL PURCHASE FUNCTION - WORKS FOR ALL PRODUCTS
        // ============================================================================
        async function buyProduct(productId, quantity = 1) {
            try {
                // Ensure Stripe is initialized
                if (!stripe) {
                    console.log('ğŸ”„ Stripe not ready, initializing...');
                    await initializeStripe();
                    if (!stripe) {
                        throw new Error('Stripe initialization failed');
                    }
                }

                // Show loading state
                const button = event.target;
                const originalText = button.innerHTML;
                button.innerHTML = '<span class="animate-pulse">è™•ç†ä¸­...</span>';
                button.disabled = true;

                console.log(`ğŸ›’ Starting checkout: ${productId} x ${quantity}`);

                // Create checkout session
                const response = await fetch('/create-checkout-session', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ productId, quantity })
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const session = await response.json();

                if (session.error) {
                    throw new Error(session.error);
                }

                if (!session.id) {
                    throw new Error('No session ID received from server');
                }

                // Redirect to Stripe Checkout
                console.log('ğŸ”„ Redirecting to Stripe checkout...');
                const result = await stripe.redirectToCheckout({ sessionId: session.id });

                if (result.error) {
                    throw new Error(result.error.message);
                }

            } catch (error) {
                console.error('âŒ Checkout error:', error);
                alert('ä»˜æ¬¾è™•ç†å‡ºç¾å•é¡Œï¼Œè«‹ç¨å¾Œå†è©¦æˆ–è¯ç¹«å®¢æœï¼\nå®¢æœä¿¡ç®±: hokkaido.meimei@email.com');
                
                // Reset button state
                button.innerHTML = originalText;
                button.disabled = false;
            }
        }

        // Backward compatibility aliases
        const buyWithQuantity = buyProduct;
        const buySimpleProduct = buyProduct;



        // ============================================================================
        // ğŸ¯ UNIVERSAL QUANTITY SELECTION - WORKS FOR ALL PRODUCTS
        // ============================================================================
        
        // Show quantity options for any product
        async function showQuantityOptions(productId = 'squid-sake-set') {
            const prefix = productId === 'squid-sake-set' ? '' : 'new-product-';
            const optionsDiv = document.getElementById(prefix + 'quantity-options');
            const buttonsDiv = document.getElementById(prefix + 'pricing-buttons');
            
            optionsDiv.classList.remove('hidden');
            buttonsDiv.innerHTML = '<div class="col-span-2 text-center text-xs text-gray-500 py-2">è¼‰å…¥ä¸­...</div>';
            
            try {
                console.log(`ğŸ“Š Loading quantity options for ${productId}...`);
                
                // Add a small delay to ensure server is ready
                await new Promise(resolve => setTimeout(resolve, 100));
                
                const response = await fetch(`/get-pricing-options/${productId}`, {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                    }
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const pricingOptions = await response.json();
                console.log(`âœ… Received ${pricingOptions.length} pricing options for ${productId}`);
                
                buttonsDiv.innerHTML = '';
                
                pricingOptions.forEach(option => {
                    const button = document.createElement('button');
                    button.onclick = () => buyProduct(productId, option.quantity);
                    
                    // Subtle, low-key colors for all buttons
                    const colorClass = option.quantity >= 5 
                        ? 'bg-gray-600 hover:bg-gray-700 border border-hokkaido-red'
                        : 'bg-gray-500 hover:bg-gray-600 border border-gray-300';
                    
                    button.className = `${colorClass} text-white py-3 px-2 rounded-lg text-xs font-medium transition-all duration-200 shadow-md`;
                    button.innerHTML = `
                        <div class="font-bold">${option.quantity}å€‹</div>
                        <div class="text-xs opacity-90">@NT$${option.unitPrice}</div>
                        <div class="font-bold text-sm">NT$${option.totalPrice.toLocaleString()}</div>
                    `;
                    
                    buttonsDiv.appendChild(button);
                });
                
            } catch (error) {
                console.error('âŒ Error loading quantity options:', error);
                
                // Fallback: Create manual buttons with hardcoded pricing
                const fallbackOptions = productId === 'squid-sake-set' 
                    ? [
                        { quantity: 1, unitPrice: 750, totalPrice: 750 },
                        { quantity: 2, unitPrice: 660, totalPrice: 1320 },
                        { quantity: 5, unitPrice: 550, totalPrice: 2750 },
                        { quantity: 10, unitPrice: 550, totalPrice: 5500 }
                    ]
                    : [
                        { quantity: 1, unitPrice: 400, totalPrice: 400 },
                        { quantity: 2, unitPrice: 400, totalPrice: 800 },
                        { quantity: 5, unitPrice: 350, totalPrice: 1750 },
                        { quantity: 10, unitPrice: 350, totalPrice: 3500 }
                    ];
                
                buttonsDiv.innerHTML = '';
                fallbackOptions.forEach(option => {
                    const button = document.createElement('button');
                    button.onclick = () => buyProduct(productId, option.quantity);
                    
                    const colorClass = option.quantity >= 5 
                        ? 'bg-gray-600 hover:bg-gray-700 border border-hokkaido-red'
                        : 'bg-gray-500 hover:bg-gray-600 border border-gray-300';
                    
                    button.className = `${colorClass} text-white py-3 px-2 rounded-lg text-xs font-medium transition-all duration-200 shadow-md`;
                    button.innerHTML = `
                        <div class="font-bold">${option.quantity}å€‹</div>
                        <div class="text-xs opacity-90">@NT$${option.unitPrice}</div>
                        <div class="font-bold text-sm">NT$${option.totalPrice.toLocaleString()}</div>
                    `;
                    
                    buttonsDiv.appendChild(button);
                });
                
                console.log(`ğŸ”„ Using fallback pricing for ${productId}`);
            }
        }

        // Hide quantity options for any product
        function hideQuantityOptions(productId = 'squid-sake-set') {
            const prefix = productId === 'squid-sake-set' ? '' : 'new-product-';
            const optionsDiv = document.getElementById(prefix + 'quantity-options');
            const buttonsDiv = document.getElementById(prefix + 'pricing-buttons');
            const quantityInput = document.getElementById(prefix + 'custom-quantity');
            const priceDisplay = document.getElementById(prefix + 'custom-price-display');
            
            optionsDiv.classList.add('hidden');
            buttonsDiv.innerHTML = '<div class="col-span-2 text-center text-xs text-gray-500 py-2">è¼‰å…¥ä¸­...</div>';
            quantityInput.value = 1;
            
            // Reset to default price based on product
            const defaultPrice = productId === 'squid-sake-set' ? 'NT$750' : 'NT$400';
            priceDisplay.textContent = defaultPrice;
        }

        // Buy custom quantity for any product
        async function buyCustomQuantity(productId = 'squid-sake-set') {
            const prefix = productId === 'squid-sake-set' ? '' : 'new-product-';
            const quantity = parseInt(document.getElementById(prefix + 'custom-quantity').value) || 1;
            
            if (quantity < 1 || quantity > 999) {
                alert('æ•¸é‡å¿…é ˆåœ¨ 1-999 ä¹‹é–“');
                return;
            }
            
            await buyProduct(productId, quantity);
        }

        // Update custom price display for any product
        async function updateCustomPrice(productId = 'squid-sake-set') {
            const prefix = productId === 'squid-sake-set' ? '' : 'new-product-';
            const quantity = parseInt(document.getElementById(prefix + 'custom-quantity').value) || 1;
            const priceDisplay = document.getElementById(prefix + 'custom-price-display');
            
            if (quantity < 1 || quantity > 999) {
                priceDisplay.textContent = 'NT$-';
                return;
            }
            
            try {
                const response = await fetch(`/get-pricing/${productId}/${quantity}`);
                if (response.ok) {
                    const pricing = await response.json();
                    priceDisplay.textContent = `NT$${pricing.totalPrice.toLocaleString()}`;
                }
            } catch (error) {
                console.error('âŒ Error updating price:', error);
            }
        }

        // Backward compatibility - specific product functions
        const showNewProductQuantityOptions = () => showQuantityOptions('new-product');
        const hideNewProductQuantityOptions = () => hideQuantityOptions('new-product');
        const buyNewProductCustomQuantity = () => buyCustomQuantity('new-product');
        const updateNewProductCustomPrice = () => updateCustomPrice('new-product');







        // Open booking forms
        function openBookingForm(type) {
            const formUrls = {
                'cherry-blossom': 'https://forms.google.com/your-cherry-blossom-form',
                'hokkaido-winter': 'https://forms.google.com/your-hokkaido-winter-form',
                'sake-cups': 'https://forms.google.com/your-sake-cups-booking-form'
            };
            window.open(formUrls[type] || 'https://forms.google.com', '_blank');
        }

        // Open inquiry form
        function openInquiryForm() {
            window.open('https://forms.google.com/your-travel-inquiry-form', '_blank');
        }

        // ============================================================================
        // ğŸ“Š UNIVERSAL PRICING DISPLAY LOADER
        // ============================================================================
        async function loadPricingDisplay(productId) {
            const elementId = productId === 'squid-sake-set' ? 'tiered-pricing-display' : 'new-product-pricing-display';
            const fallbackText = productId === 'squid-sake-set' ? 'NT$750â†’NT$550' : 'NT$400â†’NT$350';
            
            try {
                const [pricing1, pricing5] = await Promise.all([
                    fetch(`/get-pricing/${productId}/1`).then(r => r.json()),
                    fetch(`/get-pricing/${productId}/5`).then(r => r.json())
                ]);
                
                const displayElement = document.getElementById(elementId);
                displayElement.textContent = `NT$${pricing1.unitPrice}â†’NT$${pricing5.unitPrice}`;
                
            } catch (error) {
                console.error(`âŒ Error loading pricing display for ${productId}:`, error);
                document.getElementById(elementId).textContent = fallbackText;
            }
        }

        // Backward compatibility
        const loadTieredPricingDisplay = () => loadPricingDisplay('squid-sake-set');
        const loadNewProductTieredPricingDisplay = () => loadPricingDisplay('new-product');

        // Smooth scrolling for navigation
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize Stripe first
            initializeStripe();
            
            // Load dynamic pricing for both products
            loadTieredPricingDisplay();
            loadNewProductTieredPricingDisplay();
            
            const links = document.querySelectorAll('a[href^="#"]');
            links.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                });
            });

            // Add loading animations
            const cards = document.querySelectorAll('.card-hover');
            cards.forEach((card, index) => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(30px)';
                
                setTimeout(() => {
                    card.style.transition = 'all 0.6s ease-out';
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, index * 100);
            });

            // Add special attention to the featured product
            const featuredProduct = document.querySelector('#products .border-2');
            if (featuredProduct) {
                setTimeout(() => {
                    featuredProduct.classList.add('animate-pulse');
                    setTimeout(() => {
                        featuredProduct.classList.remove('animate-pulse');
                    }, 2000);
                }, 1000);
            }
        });
    </script>
</body>
</html>